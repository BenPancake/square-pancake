<!DOCTYPE html>
<html>
	<body>
		<script>
/*
let str = "";
for (let child of $0.getElementsByClassName("quiz_question")) {
	str += child.getElementsByTagName("b")[0].innerHTML + "\n";
	for (let ans of child.getElementsByTagName("label")) {
		str += ans.innerHTML + "\n";
	}
	str += "\n";
}
str;
*/

let str = `What's your favorite color?
White
Red
Pink
Yellow
Green
Blue
Purple
Brown
Black
Orange

What's your favorite time of day?
Crack of dawn
Morning
Afternoon
Sunset
Nighttime

Are you a talkative pony?
No, I'm very quiet...
I'm more of a listener, but I'm capable of carrying on a conversation
I'm about average, sharing between listening and speaking
I tend to lead conversations, but enjoy hearing feedback
You bet I am! But everyone loves what I have to say!

What's your favorite season?
Spring
Summer
Fall
Winter

Are you usually energetic?
No, I'm not very energetic at all
I am if I've had some coffee or soda
I'm about average
I've got plenty of energy each day
I'm always dancing around or bouncing off the walls!

Can you keep secrets?
Probably, maybe... but, if it's really funny... I just have to tell someone!
Most of the time I can, but I sometimes tell my close friends
Yes, I'll guard someone's secret with my life!

Do you believe in Santa Claus?
No, everyone knows he's not real
No, he's just a big marketing scheme like the Easter Bunny
Yes, but he doesn't deliver presents; he would burn up at that speed!
Yes, of course I do!
Maybe I do, maybe I don't, but if I stop believing I'll get less presents

Which greeting are you most likely to use towards your friends?
Hello!
Hiya!
Howdy!
Sup?
Hi!
Greetings!
Hay! (Hey!)

Do you brag about your accomplishments or achievements?
No, I don't like to brag or boast at all
I'll talk about them if somepony asks
I don't brag, but I do enjoy telling ponies my accomplishments!
Yes, duh, because I deserve admiration for my triumph!

Do you tend to forgive and forget, or do you hold grudges for a long time?
I forgive and forget easily, because the past is in the past
I'll forgive you eventually, but it may take some time
It depends on the situation, but I try to look past it and see it as a mistake
I don't forgive easily if I've been hurt, and I may hold a grudge
Apologies are overrated; I rarely say sorry, but I'll forgive you someday

If you could travel to any time period, what would it be?
The day of the dinosaurs!
Back in the mythological days of ancient Greece or Egypt!
The middle ages: the days of knights and Star Swirl the Bearded!
The renaissance, because that's when everything got cool!
I'm fine with this time, thanks
I want to go to the future!
I'd go back to when I was just a young pony so I could be friends with myself!

Do you trust other ponies easily?
No, I'm very skeptical of other ponies
I'm not all that trusting, but I'll give them the benefit of the doubt
I'll trust my friends implicitly, but that doesn't mean I trust everyone!
Yes, I trust just about everypony; it's better to assume the best in ponies!

Would you consider yourself lazy?
No, not at all! I'm a very hard worker!
No, I'm not lazy and understand the importance of doing my own chores
Maybe just a little bit, especially if I know someone else will do what needs to be done
Yeah, I guess so, but since I can get other ponies to do what I need, what does it matter?

Do you like being around other ponies? Or do you prefer peace and quiet?
I prefer peace and quiet; give me some space and I'll be happy
I enjoy being around my friends, but I'd rather not meet many new friends
I'm pretty easygoing either way
I like being around other ponies and making new friends
I'm a social butterfly! I love being around other ponies!

How important is exercising and staying fit to you?
Not very important at all, sorry
I try to work out whenever I get a chance, but I know I need to do more
I'm a pretty active pony by nature, but don't specifically exercise
I work out daily and feel great for it!

What's your favorite form of art? (Either what you do or what you enjoy the most)
Drawings, paintings, and stuff like that
Photography or videography; the art of capturing what it real
Music, singing, rockin' tunes, or other vocal work
Poetry or song lyrics; seeing the beauty in words
Stories and other creative writing
Dancing, acting, or some other performance work!
Sculptures and sculpting, knitting, sewing, or any sort of three-dimensional work
Art? Who needs that fancy pants stuff

Do you get upset easily if you lose?
No, I don't, but that's because I don't usually win...
No, I'm a good sport, even if I lose
I don't like losing, but I'll smile anyway and pretend it isn't bugging me
I really don't like to lose, because I know I've put in a lot of effort in whatever I'm competing at!
I don't know, because I've never lost! (Well, almost never. I play to win!)

Of these, which would you want as a pet the most?
A bunny
A cat
A dog
A dragon
A parrot or toucan
A mouse, rat, or gerbil
Any sort of fish
A ferret
A white tiger
An owl
A turtle or tortoise
Scootaloo

Which of these magical elements are your favorite?
Fire
Water
Wind
Earth
Electricity
Cold and Ice
Light
Darkness

What's your favorite suit in a deck of playing cards?
Hearts
Spades
Clubs
Diamonds
Whatever suit the Joker is!

What's your favorite fruit of the ones listed here?
Apple
Orange
Pear
Watermelon
Pineapple
Kiwi
Avocado - it's a fruit!
Starfruit
Lemons or Limes
Banana
Grapes
Strawberries
Other berries
Cantaloupe, Honeydew, or other melon

What kind of place would you like to live in?
The big, bustling city, where there's always something to do
Out in the mountains somewhere, with a beautiful view
On the beach front, in a luxurious suite
A small, quiet village where everypony knows everypony
Up in the clouds, of course, where only the cool ponies can be
Inside of a peaceful forest with lots of woodland critters

What is the meaning of life?
To have fun and make people smile!
To work hard and leave your mark on the world!
To help as many ponies out as you can!
To find true love and live happily ever after!
To be the one everyone is talking about in the record books!
To understand all of the secrets of Equestria!
There is no purpose in life. We just live to live it.
Forty-two, of course.

If you were a super-pony, what would your superpower be?
The ability to fly... through space!
The power to turn invisible at will.
Super-pony strength strong enough to move mountains!
Super-pony speed fast enough to circle the globe in just a couple of minutes!
The ability to communicate with anyone or anything with telepathy.
The power to shapeshift into anything I want!
The ability to travel through time!
The power to create multiple of me!
Super-pony brains smart enough to solve any puzzle!
The power to slow down or speed up time at will!
Super-pony charm that's powerful enough to persuade anyone to do my bidding!
Mind control, so I can control anything's mind!

What do you think the coolest accessory is for a pony such as yourself?
A hairbow or a bowtie
A jester hat
A pair of thick glasses
A cowboy hat or a baseball cap
An umbrella
A fedora
A chain and a turtleneck sweater
A scarf
A cape and maybe a wizard hat
A tophat and a monocle
Who needs any stinkin' accessories?

What's your favorite number?
One (1)
Two (2)
Three (3)
Four (4)
Five (5)
Six (6)
Seven (7)
Eight (8)
Nine (9)
Zero (0)

Which kind of pony is your favorite?
Earth
Pegasus
Unicorn
Sea Pony

If you bought a pizza that had eight slices and have two friends over, how would you split it?
They should have bought their own pizza! I'm taking all eight!
I'll charge them 1/8 the cost of the pizza per slice and we can work it out from there.
I'll give them each a single slice and I'll take the remaining six.
I'll give them each two slices and I'll take the remaining four.
I'll give them each three slices and I'll be stuck with just two.
I bought the pizza for them, anyway, so they can each have four slices.

Are you more likely to get into a fight or to run away from one?
I would definitely run away as soon as I see hooves flying!
I'd stand back and watch carefully, but would avoid any confrontation.
I would neither run nor fight, but would rather try work the situation out, if possible.
I'll stand up for my friends if they're getting bullied or are threatened, but I don't pick fights.
Ponies know not to mess with me, because if they do, they've got another one coming!

Are you more of a leader or more of a follower?
I'm definitely a follower. I don't want to be responsible for big decisions!
I usually follow along if I've got a competent leader, knowing it gets things done.
I'll lead if no one else will, but otherwise I'll just go with the flow.
I don't want the responsibility of being #1, but I make the best #2 you've ever seen!
Yeah, I tend to be a leader, because everypony looks up to me and expects me to be.
Yes, I'm definitely a leader, because I know how to take charge and take action!

What genre of movie or TV show is your favorite?
Action or Thrillers
Anime
Anything with animals in them
Cartoons
Classic Films
Comedy or Parodies
Documentaries and Informational
Drama, Medical, or Law Enforcement
Fantasy or Adventure
Horror or Slasher
Reality TV or Game Shows
Romance
Sci-Fi
Sitcoms
Sports
Travel and Home Renovation
I don't watch TV!

Are you a mare (female) or a stallion (male), and what are you like?
A mare; one who loves elegance, grace, and employing my feminine ways
A mare; I fit in with any pony, though, and don't act too girly
A mare; but, really, I feel much more like one of the guys
A stallion; but, really, I'm more of a delicate, sensitive one
A stallion; I'm not too masculine, but I'm most definitely male
A stallion; you'd better believe it, ladies! Come get some!
I prefer to simply consider myself a pony, thanks

Rock, Paper, or Scissors?
Rock
Paper
Scissors`;

let weights = [
	[[1,0,-1,2,-1,1], // What's your favorite color?
	[-1,0,2,-2,1,-1],
	[0,-2,-2,1,2,1],
	[2,1,-1,1,-1,1],
	[1,2,0,1,-1,0],
	[0,2,0,1,1,0],
	[0,-1,1,-1,0,2],
	[1,2,1,-2,1,-1],
	[0,0,1,0,1,-1],
	[0,0,2,0,2,1]],

	[[0,2,0,0,-1,0], // What's your favorite time of day?
	[0,1,0,2,0,0],
	[0,0,2,0,0,1],
	[2,0,1,0,1,1],
	[1,0,0,-1,2,1]],

	[[0,-1,-1,2,-1,-1], // Are you a talkative pony?
	[1,1,0,1,0,0],
	[1,1,1,0,0,1],
	[0,0,1,-1,1,0],
	[-1,-1,1,-2,1,2]],

	[[1,1,0,2,0,1], // What's your favorite season?
	[0,2,1,1,1,0],
	[1,0,0,0,0,2],
	[0,-1,0,0,2,0]],

	[[1,0,-1,2,0,-2], // Are you usually energietic?
	[0,1,0,0,1,0],
	[1,1,0,0,1,0],
	[0,1,2,-1,0,1],
	[-1,-1,0,-2,-1,2]],

	[[0,-2,-1,-2,0,2], // Can you keep secrets?
	[1,-1,0,-1,1,1],
	[-1,2,1,1,0,-2]],

	[[1,1,1,-1,0,-2], // Do you believe in Santa Claus?
	[1,0,1,-2,1,-1],
	[0,0,0,0,0,0],
	[0,1,-1,1,0,2],
	[0,0,1,0,2,0]],

	[[2,0,0,0,0,0], // Which greeting are you most likely to use towards your friends?
	[0,0,0,0,0,2],
	[0,2,0,0,0,1],
	[0,0,2,0,0,0],
	[0,0,0,2,0,0],
	[0,0,0,0,2,0],
	[0,1,1,0,-1,1]],

	[[1,0,-2,2,-1,0], // Do you brag about your accomplishments or achievements?
	[0,1,0,1,0,1],
	[0,1,1,-1,1,0],
	[-1,0,2,-2,2,-1]],

	[[1,-1,-2,2,-1,2], // Do you tend to forgive and forget, or do you hold grudges for a long time?
	[0,1,0,0,1,1],
	[0,1,0,0,0,0],
	[-1,0,1,-1,1,-1],
	[-1,0,2,-2,2,0]],

	[[-1,-1,1,0,0,1], // If you could travel to any time period, what would it be?
	[0,0,1,0,-2,0],
	[2,0,0,1,1,0],
	[0,0,-1,0,1,-1],
	[1,2,0,2,0,0],
	[1,-1,2,-1,0,1],
	[0,0,1,1,-1,2]],

	[[-1,1,0,-2,1,-2], // Do you trust other ponies easily?
	[0,0,1,-1,1,-1],
	[0,1,0,0,0,0],
	[1,0,0,1,0,1]],

	[[0,2,-1,0,-2,0], // Would you consider yourself lazy?
	[1,1,0,1,-1,0],
	[0,-1,2,1,1,1],
	[-1,-2,1,0,2,1]],

	[[1,0,0,2,-1,-2], // Do you like being around other ponies? Or do you prefer peace and quiet?
	[1,-1,-1,1,-2,-1],
	[0,2,0,0,0,0],
	[0,1,2,-1,2,1],
	[-1,0,1,-2,1,2]],

	[[1,-2,-1,1,1,0], // How important is exercising and staying fit to you?
	[0,-1,-1,0,0,1],
	[-1,1,2,-1,-1,1],
	[-1,2,1,-2,-1,0]],

	[[1,-1,0,1,1,1], // What's your favorite form of art? (Either what you do or what you enjoy the most)
	[-1,0,1,-1,2,0],
	[0,0,2,0,-1,2],
	[1,-1,-1,1,1,0],
	[2,1,0,1,0,0],
	[0,-1,-2,-1,1,2],
	[-1,1,-2,1,2,0],
	[0,2,1,0,-2,1]],

	[[0,-1,-2,2,-1,1], // Do you get upset easily if you lose?
	[1,1,-1,1,-1,1],
	[0,1,1,0,1,0],
	[1,2,1,-1,0,0],
	[-1,0,2,-2,0,0]],

	[[0,0,0,2,1,0], // Of these, which would you want as a pet the most?
	[0,0,1,1,1,0],
	[1,2,1,1,-1,1],
	[2,0,2,-2,0,0],
	[0,0,0,1,0,2],
	[-1,-1,-1,2,-2,1],
	[0,0,-1,1,0,0],
	[0,0,0,1,1,1],
	[0,-1,1,-1,2,0],
	[2,1,0,1,0,0],
	[0,0,1,0,-1,-1],
	[-1,-1,2,-2,-2,1]],

	[[0,2,1,-1,0,0], // Which of these magical elements are your favorite?
	[2,0,0,1,0,0],
	[0,1,2,0,-1,1],
	[0,1,0,2,1,0],
	[1,0,0,0,0,2],
	[0,0,0,0,2,0],
	[-1,0,0,2,1,0],
	[1,-1,2,-2,0,-1]],

	[[2,0,0,2,1,0], // What's your favorite suit in a deck of playing cards?
	[1,1,2,0,0,0],
	[0,2,1,0,0,2],
	[0,0,0,1,2,1],
	[-1,0,0,0,0,2]],

	[[1,2,0,0,0,1], // What's your favorite fruit of the ones listed here?
	[0,1,2,0,0,1],
	[0,0,0,2,1,0],
	[1,2,0,1,0,0],
	[0,0,1,0,0,2],
	[0,0,0,1,0,1],
	[2,0,0,1,0,0],
	[1,0,0,0,2,0],
	[0,0,2,0,0,0],
	[0,0,-2,2,0,2],
	[2,1,0,0,1,0],
	[0,0,0,1,2,2],
	[0,0,1,0,0,1],
	[1,1,0,2,2,0]],

	[[0,1,0,0,1,2], // What kind of place would you like to live in?
	[2,0,1,1,0,0],
	[0,0,0,0,2,0],
	[0,2,0,1,0,1],
	[0,0,2,0,0,0],
	[1,0,0,2,0,0]],

	[[0,0,1,0,0,2], // What is the meaning of life?
	[1,2,0,0,0,0],
	[1,1,0,2,0,1],
	[0,0,0,0,2,1],
	[0,0,2,0,1,0],
	[2,0,0,1,0,0],
	[0,0,1,0,1,-1],
	[1,0,0,0,0,0]],

	[[1,0,2,0,0,0], // If you were a super-pony, what would your superpower be?
	[2,0,0,1,0,0],
	[0,2,1,0,0,0],
	[0,1,2,0,0,0],
	[1,0,0,2,1,1],
	[0,0,0,1,0,2],
	[1,0,0,0,1,0],
	[0,2,0,0,0,2],
	[2,0,0,0,0,0],
	[0,1,1,0,0,1],
	[0,0,0,0,2,0],
	[0,0,0,1,2,0]],

	[[0,0,0,1,2,0], // What do you think the coolest accessory is for a pony such as yourself?
	[0,0,0,0,0,2],
	[1,0,0,0,0,0],
	[0,2,1,0,0,0],
	[0,0,0,2,1,0],
	[-1,1,1,0,1,0],
	[-1,0,2,0,-1,1],
	[0,-1,-1,1,2,0],
	[2,0,0,0,0,1],
	[0,1,0,0,0,1],
	[0,1,2,0,0,0]],

	[[0,1,2,0,2,0], // What's your favorite number?
	[2,0,0,1,0,0],
	[0,0,0,2,1,0],
	[0,0,0,0,0,2],
	[0,2,1,0,0,1],
	[1,1,0,0,1,0],
	[2,0,0,2,1,0],
	[0,1,2,0,0,2],
	[1,0,0,0,2,0],
	[0,0,0,1,0,0]],

	[[0,1,0,0,0,1], // Which kind of pony is your favorite?
	[0,0,1,1,0,0],
	[1,0,0,0,1,0],
	[0,0,0,0,0,1]],

	[[0,-1,2,-2,-2,1], // If you bought a pizza that had eight slices and have two friends over, how would you split it?
	[1,0,1,-1,0,0],
	[0,-1,1,-1,-1,0],
	[0,0,0,0,0,1],
	[0,0,-1,1,1,0],
	[-1,1,-2,2,2,0]],

	[[0,-2,-2,2,1,0], // Are you more likely to get into a fight or to run away from one?
	[1,0,-1,2,1,0],
	[1,1,0,0,1,0],
	[0,2,1,-1,0,1],
	[-1,0,2,-2,0,1]],

	[[-1,-1,-1,2,-1,1], // Are you more of a leader or more of a follower?
	[0,0,-1,2,0,0],
	[0,1,0,-1,1,0],
	[1,0,-1,0,0,1],
	[1,0,1,-2,1,0],
	[1,1,2,-2,0,-1]],

	[[0,1,2,-2,0,0], // What genre of movie or TV show is your favorite?
	[1,0,0,0,-2,1],
	[0,0,-1,2,0,1],
	[0,0,1,0,0,2],
	[1,-1,-2,1,2,0],
	[-1,0,0,1,0,2],
	[2,-1,-2,0,-1,-1],
	[0,0,0,-1,2,0],
	[1,1,1,0,0,1],
	[0,1,2,-2,-1,0],
	[-2,1,0,-1,1,1],
	[0,-1,-2,1,2,0],
	[1,0,1,0,0,0],
	[0,0,0,1,0,1],
	[-1,2,1,-2,0,0],
	[0,1,0,2,1,0],
	[0,1,0,0,0,-1]],

	[[0,-1,-2,1,2,0], // Are you a mare (female) or a stallion (male), and what are you like?
	[1,1,0,0,0,1],
	[0,2,1,-1,-2,0],
	[0,-1,-1,2,1,0],
	[1,0,0,0,0,1],
	[0,1,2,-2,-1,1],
	[1,0,1,0,0,0]],

	[[1,0,0,0,1,0], // Rock, Paper, or Scissors?
	[0,0,0,1,0,1],
	[0,1,1,0,0,0]]
];
let form = document.createElement("div");
document.body.appendChild(form);
function Question(inputStr, inputWeights, id) {
	this.inputWeights = inputWeights;
	
	let inputLines = inputStr.split("\n");
	let questionE = document.createElement("h3");
	questionE.innerHTML = inputLines[0];
	form.appendChild(questionE);
	
	let answerDivs = [];
	let answerButtons = [];
	for (let j = 1; j < inputLines.length; j++) { // eew, 1-indexing, but it potatoes
		let i = j - 1; // there we go, all better
		answerDivs[i] = document.createElement("div");
		answerButtons[i] = document.createElement("input");
		answerButtons[i].type = "radio";
		answerButtons[i].name = "" + id;
		let label = document.createElement("label");
		label.innerHTML = inputLines[j];
		label.addEventListener("click", function() {
			answerButtons[i].checked = true;
		}, false);
		form.appendChild(answerDivs[i]);
		answerDivs[i].appendChild(answerButtons[i]);
		answerDivs[i].appendChild(label);
	}
	this.getScores = function() {
		for (let i = 0; i < answerButtons.length; i++) {
			if (answerButtons[i].checked) {
				return inputWeights[i];
			}
		}
		return [0, 0, 0, 0, 0, 0];
	};
	this.hide = function() {
		questionE.style.display = "none";
		for (let div of answerDivs) {
			div.style.display = "none";
		}
	}
}
let questions = [];
function relu(x) {
	return x > 0 ? x : 0;
}
let submitButton;
function displayScores(arr) {
	console.log(arr);
	let shareURL;
	let takeAgain;
	if (window.location.href.match(/\?/)) { // just get the url and put it
		shareURL = window.location.href;
		takeAgain = window.location.href.split("?")[0];
	}
	else {
		shareURL = window.location.href + `?t=${arr[0]}&a=${arr[1]}&d=${arr[2]}&f=${arr[3]}&r=${arr[4]}&p=${arr[5]}`;
		for (let i = 0; i < questions.length; i++) {
			questions[i].hide();
			submitButton.style.display = "none";
		}
		takeAgain = window.location.href;
	}
	console.log(shareURL);
	let maxVal = 1;
	for (let i = 0; i < arr.length; i++) {
		maxVal = maxVal > arr[i] ? maxVal : arr[i];
	}
	for (let i = 0; i < arr.length; i++) {
		arr[i] = relu(arr[i]) / maxVal;
	}
	let share = document.createElement("a");
	document.body.appendChild(share);
	share.innerHTML = "Share URL: " + shareURL;
	share.href = shareURL;
	share.style.display = "block";
	let again = document.createElement("a");
	document.body.appendChild(again);
	again.innerHTML = "Take again: " + takeAgain;
	again.href = takeAgain;
	again.style.display = "block";
	let canvas = document.createElement("canvas");
	document.body.appendChild(canvas);
	canvas.width = 450;
	canvas.height = 450;
	let image = document.createElement("img");
	let ctx = canvas.getContext("2d");
	ctx.beginPath();
	ctx.fillStyle = "#fff";
	ctx.fillRect(0, 0, canvas.width, canvas.height);
	ctx.closePath();
	ctx.beginPath();
	ctx.fillStyle = "rgba(150,0,106,.4)";
	ctx.strokeStyle = "#96006a";
	ctx.lineCap = "round";
	ctx.lineWidth = 3;
	for (let j = 0; j < arr.length + 1; j++) {
		i = j % arr.length;
		let ang = 2 * Math.PI * (i / arr.length - 1/4);
		let x = (Math.cos(ang) * arr[i] * .6 + 1) * canvas.width / 2;
		let y = (Math.sin(ang) * arr[i] * .6 + 1) * canvas.height / 2;
		if (j == 0) {
			ctx.moveTo(x, y);
		}
		else {
			ctx.lineTo(x, y);
		}
	}
	ctx.fill();
	ctx.stroke();
	ctx.closePath();
	image.onload = function() {
		ctx.drawImage(image, 0, 0);
	}
	image.src = "http://klimaleksus.narod.ru/ppt/quiz_over_eng.png";
}
let scores;
let urlParams = window.location.href.match(/\?.*/);
if (urlParams) { // load image or something
	urlParams = urlParams[0];
	urlParams = urlParams.split("?").pop(); // oofers, but it works
	urlParams = urlParams.split("&");
	let keys = [];
	for (let urlParam of urlParams) {
		let smallArr = urlParam.split("=");
		keys[smallArr[0]] = Number(smallArr[1]);
	}
	displayScores([keys.t, keys.a, keys.d, keys.f, keys.r, keys.p]);
}
else { // load quiz
	str = str.split("\n\n");
	for (let i = 0; i < str.length; i++) {
		questions.push(new Question(str[i], weights[i], i));
	}
	submitButton = document.createElement("button");
	form.appendChild(submitButton);
	submitButton.innerHTML = "Submit";
	submitButton.addEventListener("click", function() {
		scores = [0, 0, 0, 0, 0, 0];
		for (question of questions) {
			let theseScores = question.getScores();
			for (let i = 0; i < 6; i++) {
				scores[i] += theseScores[i];
			}
		}
		displayScores(scores);
	}, false);
}
		</script>
	</body>
</html>